{
    "openapi": "3.0.0",
    "info": {
        "title": "SDC - Sistema de Defesa Civil API",
        "description": "API RESTful escalável para 100k+ usuários simultâneos.\r\n *                  Suporta webhooks, rate limiting inteligente, processamento assíncrono via Redis,\r\n *                  e múltiplos níveis de priorização de requisições.",
        "contact": {
            "name": "SDC API Support",
            "email": "api@sdc.gov.br"
        },
        "license": {
            "name": "Proprietary",
            "url": "https://sdc.gov.br/license"
        },
        "version": "1.0.0"
    },
    "servers": [
        {
            "url": "http://localhost:8000",
            "description": "Servidor de Desenvolvimento"
        },
        {
            "url": "https://api.sdc.gov.br",
            "description": "Servidor de Produção"
        }
    ],
    "paths": {
        "/api/health": {
            "get": {
                "tags": [
                    "Health Check"
                ],
                "summary": "Health check básico",
                "description": "Verifica se a aplicação está respondendo",
                "operationId": "healthBasic",
                "responses": {
                    "200": {
                        "description": "Sistema operacional",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "ok"
                                        },
                                        "timestamp": {
                                            "type": "string",
                                            "format": "date-time"
                                        },
                                        "uptime": {
                                            "type": "integer",
                                            "example": 3600
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/health/detailed": {
            "get": {
                "tags": [
                    "Health Check"
                ],
                "summary": "Health check detalhado",
                "description": "Verifica todos os componentes críticos do sistema (DB, Redis, Cache, Filas)",
                "operationId": "healthDetailed",
                "responses": {
                    "200": {
                        "description": "Status detalhado de todos componentes",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "healthy"
                                        },
                                        "timestamp": {
                                            "type": "string",
                                            "format": "date-time"
                                        },
                                        "checks": {
                                            "properties": {
                                                "database": {
                                                    "properties": {
                                                        "status": {
                                                            "type": "string",
                                                            "example": "ok"
                                                        },
                                                        "latency_ms": {
                                                            "type": "number",
                                                            "example": 2.45
                                                        }
                                                    },
                                                    "type": "object"
                                                },
                                                "redis": {
                                                    "properties": {
                                                        "status": {
                                                            "type": "string",
                                                            "example": "ok"
                                                        },
                                                        "latency_ms": {
                                                            "type": "number",
                                                            "example": 1.12
                                                        }
                                                    },
                                                    "type": "object"
                                                },
                                                "cache": {
                                                    "properties": {
                                                        "status": {
                                                            "type": "string",
                                                            "example": "ok"
                                                        }
                                                    },
                                                    "type": "object"
                                                },
                                                "queue": {
                                                    "properties": {
                                                        "status": {
                                                            "type": "string",
                                                            "example": "ok"
                                                        },
                                                        "pending_jobs": {
                                                            "type": "integer",
                                                            "example": 15
                                                        }
                                                    },
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "system": {
                                            "properties": {
                                                "memory_usage_mb": {
                                                    "type": "number",
                                                    "example": 128.5
                                                },
                                                "cpu_load": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "number"
                                                    },
                                                    "example": [
                                                        0.5,
                                                        0.6,
                                                        0.7
                                                    ]
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "503": {
                        "description": "Sistema com problemas",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "degraded"
                                        },
                                        "errors": {
                                            "type": "array",
                                            "items": {
                                                "type": "string"
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/health/metrics": {
            "get": {
                "tags": [
                    "Health Check"
                ],
                "summary": "Métricas do sistema",
                "description": "Retorna métricas em formato Prometheus",
                "operationId": "healthMetrics",
                "responses": {
                    "200": {
                        "description": "Métricas Prometheus",
                        "content": {
                            "text/plain": {
                                "schema": {
                                    "type": "string"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/logs/recent": {
            "get": {
                "tags": [
                    "Log Viewer"
                ],
                "summary": "Logs recentes",
                "description": "Retorna os logs mais recentes do sistema",
                "operationId": "logsRecent",
                "parameters": [
                    {
                        "name": "type",
                        "in": "query",
                        "description": "Tipo de log (all, api, webhook, integration, error, performance, security)",
                        "schema": {
                            "type": "string",
                            "default": "all",
                            "enum": [
                                "all",
                                "api",
                                "webhook",
                                "integration",
                                "error",
                                "performance",
                                "security"
                            ]
                        }
                    },
                    {
                        "name": "limit",
                        "in": "query",
                        "description": "Número de logs a retornar",
                        "schema": {
                            "type": "integer",
                            "default": 100,
                            "maximum": 1000
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Lista de logs",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "logs": {
                                            "type": "array",
                                            "items": {
                                                "type": "object"
                                            }
                                        },
                                        "total": {
                                            "type": "integer"
                                        },
                                        "type": {
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/logs/metrics": {
            "get": {
                "tags": [
                    "Log Viewer"
                ],
                "summary": "Métricas de logs",
                "description": "Retorna estatísticas agregadas dos logs",
                "operationId": "logsMetrics",
                "responses": {
                    "200": {
                        "description": "Métricas agregadas",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "metrics": {
                                            "type": "array",
                                            "items": {
                                                "type": "object"
                                            }
                                        },
                                        "summary": {
                                            "properties": {
                                                "total_events": {
                                                    "type": "integer"
                                                },
                                                "events_by_type": {
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/logs/errors": {
            "get": {
                "tags": [
                    "Log Viewer"
                ],
                "summary": "Logs de erros",
                "description": "Retorna apenas logs de erro (error, critical)",
                "operationId": "logsErrors",
                "responses": {
                    "200": {
                        "description": "Lista de erros",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "errors": {
                                            "type": "array",
                                            "items": {
                                                "type": "object"
                                            }
                                        },
                                        "total": {
                                            "type": "integer"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/logs/stream": {
            "get": {
                "tags": [
                    "Log Viewer"
                ],
                "summary": "Stream de logs em tempo real",
                "description": "SSE (Server-Sent Events) para logs em tempo real",
                "operationId": "logsStream",
                "responses": {
                    "200": {
                        "description": "Stream de eventos",
                        "content": {
                            "text/event-stream": {}
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/auth/login": {
            "post": {
                "tags": [
                    "Autenticação"
                ],
                "summary": "Autentica um usuário e retorna token",
                "description": "Realiza login e retorna um token de acesso para uso nas APIs",
                "operationId": "login",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "cpf",
                                    "password"
                                ],
                                "properties": {
                                    "cpf": {
                                        "type": "string",
                                        "example": "12345678900"
                                    },
                                    "password": {
                                        "type": "string",
                                        "format": "password",
                                        "example": "password"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Login realizado com sucesso",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "token": {
                                            "type": "string",
                                            "example": "1|abcdef123456..."
                                        },
                                        "user": {
                                            "properties": {
                                                "id": {
                                                    "type": "integer",
                                                    "example": 1
                                                },
                                                "name": {
                                                    "type": "string",
                                                    "example": "Admin Geral"
                                                },
                                                "email": {
                                                    "type": "string",
                                                    "example": "admin@defesa.mg.gov.br"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Credenciais inválidas",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "As credenciais fornecidas estão incorretas."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/auth/logout": {
            "post": {
                "tags": [
                    "Autenticação"
                ],
                "summary": "Revoga o token de autenticação",
                "description": "Revoga o token atual do usuário autenticado",
                "operationId": "logout",
                "responses": {
                    "200": {
                        "description": "Logout realizado com sucesso",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Logout realizado com sucesso"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/auth/me": {
            "get": {
                "tags": [
                    "Autenticação"
                ],
                "summary": "Retorna dados do usuário autenticado",
                "description": "Retorna os dados do usuário atualmente autenticado",
                "operationId": "me",
                "responses": {
                    "200": {
                        "description": "Dados do usuário",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "properties": {
                                                "id": {
                                                    "type": "integer",
                                                    "example": 1
                                                },
                                                "name": {
                                                    "type": "string",
                                                    "example": "Admin Geral"
                                                },
                                                "email": {
                                                    "type": "string",
                                                    "example": "admin@defesa.mg.gov.br"
                                                },
                                                "cpf": {
                                                    "type": "string",
                                                    "example": "12345678900"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/bi/entrada": {
            "get": {
                "tags": [
                    "BI - Entrada"
                ],
                "summary": "Lista todas as entradas de desastres e eventos",
                "description": "Retorna uma lista paginada de todas as entradas de desastres e eventos registrados no sistema",
                "operationId": "listEntradas",
                "parameters": [
                    {
                        "name": "page",
                        "in": "query",
                        "description": "Número da página",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    },
                    {
                        "name": "per_page",
                        "in": "query",
                        "description": "Itens por página",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "example": 15
                        }
                    },
                    {
                        "name": "uf",
                        "in": "query",
                        "description": "Filtrar por UF",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "MG"
                        }
                    },
                    {
                        "name": "municipio",
                        "in": "query",
                        "description": "Filtrar por município",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "Juiz de Fora"
                        }
                    },
                    {
                        "name": "data_inicio",
                        "in": "query",
                        "description": "Data de início (formato: YYYY-MM-DD)",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "format": "date",
                            "example": "2025-01-01"
                        }
                    },
                    {
                        "name": "data_fim",
                        "in": "query",
                        "description": "Data de fim (formato: YYYY-MM-DD)",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "format": "date",
                            "example": "2025-12-31"
                        }
                    },
                    {
                        "name": "status",
                        "in": "query",
                        "description": "Filtrar por status",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "Registro",
                                "Em Análise",
                                "Aprovado",
                                "Rejeitado"
                            ]
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Lista de entradas retornada com sucesso",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "sucesso": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "dados": {
                                            "type": "array",
                                            "items": {
                                                "properties": {
                                                    "id": {
                                                        "type": "integer",
                                                        "example": 98
                                                    },
                                                    "uf": {
                                                        "type": "string",
                                                        "example": "MG"
                                                    },
                                                    "municipio": {
                                                        "type": "string",
                                                        "example": "Juiz de Fora"
                                                    },
                                                    "codigo_ibge": {
                                                        "type": "string",
                                                        "example": "3136702"
                                                    },
                                                    "macroregiao": {
                                                        "type": "string",
                                                        "example": "ZONA DA MATA"
                                                    },
                                                    "latitude_dec": {
                                                        "type": "number",
                                                        "format": "float",
                                                        "example": -21.764167
                                                    },
                                                    "longitude_dec": {
                                                        "type": "number",
                                                        "format": "float",
                                                        "example": -43.350278
                                                    },
                                                    "data_registro": {
                                                        "type": "string",
                                                        "format": "date",
                                                        "example": "2025-11-19"
                                                    },
                                                    "data_criacao": {
                                                        "type": "string",
                                                        "format": "date-time",
                                                        "example": "2025-11-19T17:21:07.000000Z"
                                                    },
                                                    "protocolo": {
                                                        "type": "string",
                                                        "example": "MG-F-3136702-13321-20250613"
                                                    },
                                                    "cobrade": {
                                                        "type": "string",
                                                        "example": "1.3.3.2.1"
                                                    },
                                                    "tipo_desastre": {
                                                        "type": "string",
                                                        "example": "Onda de frio: friagem."
                                                    },
                                                    "status": {
                                                        "type": "string",
                                                        "example": "Registro"
                                                    },
                                                    "data_fato": {
                                                        "type": "string",
                                                        "format": "date",
                                                        "example": "2025-06-13"
                                                    },
                                                    "obitos": {
                                                        "type": "integer",
                                                        "example": 0
                                                    },
                                                    "feridos": {
                                                        "type": "integer",
                                                        "example": 0
                                                    },
                                                    "desalojados": {
                                                        "type": "integer",
                                                        "example": 0
                                                    },
                                                    "desabrigados": {
                                                        "type": "integer",
                                                        "example": 0
                                                    },
                                                    "desaparecidos": {
                                                        "type": "integer",
                                                        "example": 0
                                                    },
                                                    "outros_afetados": {
                                                        "type": "integer",
                                                        "example": 50
                                                    },
                                                    "danos_humanos_quantidade": {
                                                        "type": "integer",
                                                        "example": 50
                                                    },
                                                    "danos_materiais_danificadas": {
                                                        "type": "integer",
                                                        "example": 0
                                                    },
                                                    "danos_materiais_destruidas": {
                                                        "type": "integer",
                                                        "example": 0
                                                    },
                                                    "danos_materiais_valor": {
                                                        "type": "number",
                                                        "format": "float",
                                                        "example": 0
                                                    },
                                                    "prejuizos_publicos_valor": {
                                                        "type": "number",
                                                        "format": "float",
                                                        "example": 0
                                                    },
                                                    "prejuizos_privados_valor": {
                                                        "type": "number",
                                                        "format": "float",
                                                        "example": 0
                                                    }
                                                },
                                                "type": "object"
                                            }
                                        },
                                        "total": {
                                            "type": "integer",
                                            "example": 100
                                        },
                                        "pagina_atual": {
                                            "type": "integer",
                                            "example": 1
                                        },
                                        "por_pagina": {
                                            "type": "integer",
                                            "example": 15
                                        },
                                        "ultima_pagina": {
                                            "type": "integer",
                                            "example": 7
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Não autenticado"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/bi/entrada/{id}": {
            "get": {
                "tags": [
                    "BI - Entrada"
                ],
                "summary": "Exibe uma entrada específica",
                "description": "Retorna os detalhes completos de uma entrada de desastre/evento específica",
                "operationId": "showEntrada",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID da entrada",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": 98
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Entrada encontrada",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "sucesso": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "dados": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Entrada não encontrada"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/integracao/rat/{ratId}/pae": {
            "get": {
                "tags": [
                    "Integração"
                ],
                "summary": "Busca empreendimento PAE relacionado a um protocolo RAT",
                "description": "Retorna o empreendimento PAE relacionado a um protocolo RAT através do município ou referência",
                "operationId": "getPaeByRat",
                "parameters": [
                    {
                        "name": "ratId",
                        "in": "path",
                        "description": "ID do protocolo RAT",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Dados relacionados encontrados",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "properties": {
                                                "rat": {
                                                    "properties": {
                                                        "id": {
                                                            "type": "integer",
                                                            "example": 1
                                                        },
                                                        "numero": {
                                                            "type": "string",
                                                            "example": "2025/001"
                                                        }
                                                    },
                                                    "type": "object"
                                                },
                                                "pae": {
                                                    "properties": {
                                                        "id": {
                                                            "type": "integer",
                                                            "example": 1
                                                        },
                                                        "nome": {
                                                            "type": "string",
                                                            "example": "Barragem Sul Superior"
                                                        }
                                                    },
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Nenhum relacionamento encontrado"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/integracao/pae/{paeId}/rat": {
            "get": {
                "tags": [
                    "Integração"
                ],
                "summary": "Busca protocolos RAT relacionados a um empreendimento PAE",
                "description": "Retorna todos os protocolos RAT relacionados a um empreendimento PAE",
                "operationId": "getRatByPae",
                "parameters": [
                    {
                        "name": "paeId",
                        "in": "path",
                        "description": "ID do empreendimento PAE",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Protocolos relacionados encontrados",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "properties": {
                                                "pae": {
                                                    "properties": {
                                                        "id": {
                                                            "type": "integer",
                                                            "example": 1
                                                        },
                                                        "nome": {
                                                            "type": "string",
                                                            "example": "Barragem Sul Superior"
                                                        }
                                                    },
                                                    "type": "object"
                                                },
                                                "protocolos_rat": {
                                                    "type": "array",
                                                    "items": {
                                                        "properties": {
                                                            "id": {
                                                                "type": "integer",
                                                                "example": 1
                                                            },
                                                            "numero": {
                                                                "type": "string",
                                                                "example": "2025/001"
                                                            }
                                                        },
                                                        "type": "object"
                                                    }
                                                },
                                                "total": {
                                                    "type": "integer",
                                                    "example": 3
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/integration/execute": {
            "post": {
                "tags": [
                    "Dynamic Integration"
                ],
                "summary": "Executar integração bidirecional",
                "description": "Endpoint universal para executar integrações com sistemas externos. Envia dados e recebe resposta em tempo real ou assíncrono.",
                "operationId": "executeIntegration",
                "requestBody": {
                    "description": "Dados da integração",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "integration_type",
                                    "action",
                                    "payload"
                                ],
                                "properties": {
                                    "integration_type": {
                                        "description": "Tipo de integração",
                                        "type": "string",
                                        "enum": [
                                            "rest_api",
                                            "soap",
                                            "graphql",
                                            "webhook",
                                            "database",
                                            "file_transfer"
                                        ],
                                        "example": "rest_api"
                                    },
                                    "action": {
                                        "description": "Ação a ser executada",
                                        "type": "string",
                                        "example": "create_user"
                                    },
                                    "endpoint": {
                                        "description": "URL do endpoint externo",
                                        "type": "string",
                                        "format": "url",
                                        "example": "https://api.external-system.com/v1/users"
                                    },
                                    "method": {
                                        "type": "string",
                                        "enum": [
                                            "GET",
                                            "POST",
                                            "PUT",
                                            "PATCH",
                                            "DELETE"
                                        ],
                                        "example": "POST"
                                    },
                                    "payload": {
                                        "description": "Dados a serem enviados",
                                        "type": "object",
                                        "example": {
                                            "name": "João Silva",
                                            "email": "joao@example.com"
                                        }
                                    },
                                    "headers": {
                                        "description": "Headers customizados",
                                        "type": "object",
                                        "example": {
                                            "X-API-Key": "abc123",
                                            "X-Client-ID": "xyz789"
                                        }
                                    },
                                    "auth": {
                                        "description": "Configuração de autenticação",
                                        "properties": {
                                            "type": {
                                                "type": "string",
                                                "enum": [
                                                    "bearer",
                                                    "basic",
                                                    "oauth2",
                                                    "api_key"
                                                ],
                                                "example": "bearer"
                                            },
                                            "token": {
                                                "type": "string",
                                                "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                                            }
                                        },
                                        "type": "object"
                                    },
                                    "mapping": {
                                        "description": "Mapeamento de campos (input → output)",
                                        "type": "object",
                                        "example": {
                                            "internal_field": "external_field",
                                            "user_name": "name"
                                        }
                                    },
                                    "priority": {
                                        "type": "string",
                                        "enum": [
                                            "low",
                                            "normal",
                                            "high",
                                            "critical"
                                        ],
                                        "example": "normal"
                                    },
                                    "async": {
                                        "description": "Se true, executa assíncrono via fila",
                                        "type": "boolean",
                                        "example": false
                                    },
                                    "bidirectional": {
                                        "description": "Se true, espera resposta e processa dados recebidos",
                                        "type": "boolean",
                                        "example": true
                                    },
                                    "callback_url": {
                                        "description": "URL para receber resposta (apenas async)",
                                        "type": "string",
                                        "format": "url",
                                        "example": "https://meu-sistema.com/callback"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Integração executada com sucesso (síncrono)",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Integration executed successfully"
                                        },
                                        "integration_id": {
                                            "type": "string",
                                            "example": "int_1234567890"
                                        },
                                        "sent_data": {
                                            "description": "Dados enviados",
                                            "type": "object"
                                        },
                                        "received_data": {
                                            "description": "Dados recebidos do sistema externo",
                                            "type": "object"
                                        },
                                        "mapped_response": {
                                            "description": "Resposta mapeada conforme configuração",
                                            "type": "object"
                                        },
                                        "duration_ms": {
                                            "type": "number",
                                            "example": 234.56
                                        },
                                        "external_status": {
                                            "type": "integer",
                                            "example": 201
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "202": {
                        "description": "Integração enfileirada (assíncrono)",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Integration queued for processing"
                                        },
                                        "integration_id": {
                                            "type": "string",
                                            "example": "int_1234567890"
                                        },
                                        "queue": {
                                            "type": "string",
                                            "example": "high"
                                        },
                                        "estimated_execution": {
                                            "type": "string",
                                            "example": "within 30 seconds"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Erro de validação",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Erro na integração",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "error": {
                                            "type": "string",
                                            "example": "External API returned error 500"
                                        },
                                        "external_response": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/integration/status/{integrationId}": {
            "get": {
                "tags": [
                    "Dynamic Integration"
                ],
                "summary": "Verificar status de integração",
                "description": "Consulta o status de uma integração assíncrona",
                "operationId": "checkIntegrationStatus",
                "parameters": [
                    {
                        "name": "integrationId",
                        "in": "path",
                        "description": "ID da integração",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "example": "int_1234567890"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Status da integração",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "integration_id": {
                                            "type": "string",
                                            "example": "int_1234567890"
                                        },
                                        "status": {
                                            "type": "string",
                                            "enum": [
                                                "pending",
                                                "processing",
                                                "completed",
                                                "failed"
                                            ],
                                            "example": "completed"
                                        },
                                        "result": {
                                            "description": "Resultado (se completado)",
                                            "type": "object"
                                        },
                                        "error": {
                                            "description": "Erro (se falhou)",
                                            "type": "string",
                                            "nullable": true
                                        },
                                        "created_at": {
                                            "type": "string",
                                            "format": "date-time"
                                        },
                                        "completed_at": {
                                            "type": "string",
                                            "format": "date-time",
                                            "nullable": true
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/integration/templates": {
            "get": {
                "tags": [
                    "Dynamic Integration"
                ],
                "summary": "Listar templates de integração pré-configurados",
                "description": "Retorna templates prontos para integrações com sistemas populares (Salesforce, SAP, etc)",
                "operationId": "listIntegrationTemplates",
                "responses": {
                    "200": {
                        "description": "Lista de templates",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "templates": {
                                            "type": "array",
                                            "items": {
                                                "properties": {
                                                    "id": {
                                                        "type": "string",
                                                        "example": "salesforce_create_lead"
                                                    },
                                                    "name": {
                                                        "type": "string",
                                                        "example": "Salesforce - Criar Lead"
                                                    },
                                                    "description": {
                                                        "type": "string"
                                                    },
                                                    "integration_type": {
                                                        "type": "string",
                                                        "example": "rest_api"
                                                    },
                                                    "required_fields": {
                                                        "type": "array",
                                                        "items": {
                                                            "type": "string"
                                                        }
                                                    },
                                                    "example_payload": {
                                                        "type": "object"
                                                    }
                                                },
                                                "type": "object"
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/pae/empreendimentos": {
            "get": {
                "tags": [
                    "PAE"
                ],
                "summary": "Lista todos os empreendimentos PAE",
                "description": "Retorna uma lista paginada de todos os empreendimentos cadastrados no sistema PAE",
                "operationId": "listEmpreendimentos",
                "parameters": [
                    {
                        "name": "page",
                        "in": "query",
                        "description": "Número da página",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    },
                    {
                        "name": "per_page",
                        "in": "query",
                        "description": "Itens por página",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "example": 15
                        }
                    },
                    {
                        "name": "municipio_id",
                        "in": "query",
                        "description": "Filtrar por município",
                        "required": false,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "status",
                        "in": "query",
                        "description": "Filtrar por status",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "aprovado",
                                "em_analise",
                                "pendente",
                                "vencido"
                            ]
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Lista de empreendimentos retornada com sucesso",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/Empreendimento"
                                            }
                                        },
                                        "meta": {
                                            "$ref": "#/components/schemas/PaginationMeta"
                                        },
                                        "links": {
                                            "$ref": "#/components/schemas/PaginationLinks"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Não autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            },
            "post": {
                "tags": [
                    "PAE"
                ],
                "summary": "Cria um novo empreendimento PAE",
                "description": "Cadastra um novo empreendimento no sistema PAE",
                "operationId": "storeEmpreendimento",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "nome",
                                    "tipo",
                                    "municipio_id",
                                    "latitude",
                                    "longitude",
                                    "nivel_emergencia",
                                    "status"
                                ],
                                "properties": {
                                    "nome": {
                                        "type": "string",
                                        "example": "Barragem Sul Superior"
                                    },
                                    "tipo": {
                                        "type": "string",
                                        "enum": [
                                            "Barragem de Rejeitos",
                                            "Barragem de Água",
                                            "Outro"
                                        ],
                                        "example": "Barragem de Rejeitos"
                                    },
                                    "municipio_id": {
                                        "type": "integer",
                                        "example": 123
                                    },
                                    "latitude": {
                                        "type": "number",
                                        "format": "float",
                                        "example": -20.2547
                                    },
                                    "longitude": {
                                        "type": "number",
                                        "format": "float",
                                        "example": -43.8011
                                    },
                                    "nivel_emergencia": {
                                        "type": "integer",
                                        "enum": [
                                            1,
                                            2,
                                            3
                                        ],
                                        "example": 1
                                    },
                                    "status": {
                                        "type": "string",
                                        "enum": [
                                            "aprovado",
                                            "em_analise",
                                            "pendente",
                                            "vencido"
                                        ],
                                        "example": "em_analise"
                                    },
                                    "data_emissao": {
                                        "type": "string",
                                        "format": "date",
                                        "example": "2024-10-15"
                                    },
                                    "proximo_vencimento": {
                                        "type": "string",
                                        "format": "date",
                                        "example": "2025-10-15"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Empreendimento criado com sucesso",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "$ref": "#/components/schemas/Empreendimento"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Empreendimento criado com sucesso"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Erro de validação",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "The given data was invalid."
                                        },
                                        "errors": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/pae/empreendimentos/{id}": {
            "get": {
                "tags": [
                    "PAE"
                ],
                "summary": "Exibe um empreendimento específico",
                "description": "Retorna os detalhes completos de um empreendimento PAE, incluindo documentos, histórico e comitê",
                "operationId": "showEmpreendimento",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID do empreendimento",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Empreendimento encontrado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "$ref": "#/components/schemas/Empreendimento"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Empreendimento não encontrado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Empreendimento não encontrado."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            },
            "put": {
                "tags": [
                    "PAE"
                ],
                "summary": "Atualiza um empreendimento PAE",
                "description": "Atualiza os dados de um empreendimento existente",
                "operationId": "updateEmpreendimento",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID do empreendimento",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "nome": {
                                        "type": "string",
                                        "example": "Barragem Sul Superior"
                                    },
                                    "status": {
                                        "type": "string",
                                        "enum": [
                                            "aprovado",
                                            "em_analise",
                                            "pendente",
                                            "vencido"
                                        ]
                                    },
                                    "nivel_emergencia": {
                                        "type": "integer",
                                        "enum": [
                                            1,
                                            2,
                                            3
                                        ]
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Empreendimento atualizado com sucesso",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "$ref": "#/components/schemas/Empreendimento"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Empreendimento atualizado com sucesso"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Empreendimento não encontrado"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            },
            "delete": {
                "tags": [
                    "PAE"
                ],
                "summary": "Remove um empreendimento PAE",
                "description": "Remove um empreendimento do sistema",
                "operationId": "deleteEmpreendimento",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID do empreendimento",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    }
                ],
                "responses": {
                    "204": {
                        "description": "Empreendimento removido com sucesso"
                    },
                    "404": {
                        "description": "Empreendimento não encontrado"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/power-bi/proxy/{api}/{path}": {
            "get": {
                "tags": [
                    "Power BI"
                ],
                "summary": "Proxy para acessar APIs externas usando token Power BI",
                "description": "Faz proxy de requisições para APIs externas. O sistema valida o token Power BI, busca o token individual da API e faz a requisição automaticamente.",
                "operationId": "proxyRequest",
                "parameters": [
                    {
                        "name": "api",
                        "in": "path",
                        "description": "Nome da API (pae, rat, tdap, bi)",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "pae",
                                "rat",
                                "tdap",
                                "bi"
                            ]
                        }
                    },
                    {
                        "name": "path",
                        "in": "path",
                        "description": "Caminho do endpoint na API externa (ex: api/v1/empreendimentos)",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "example": "api/v1/empreendimentos"
                        }
                    },
                    {
                        "name": "X-PowerBI-Token",
                        "in": "header",
                        "description": "Token do Power BI",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Resposta da API externa",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "401": {
                        "description": "Token inválido ou não fornecido"
                    },
                    "404": {
                        "description": "API não encontrada"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/power-bi/token": {
            "post": {
                "tags": [
                    "Power BI"
                ],
                "summary": "Gera token único para Power BI acessar múltiplas APIs",
                "description": "Gera um token único que permite ao Power BI acessar todas as APIs configuradas (PAE, RAT, TDAP, BI). Este token contém tokens individuais para cada API.",
                "operationId": "generatePowerBIToken",
                "requestBody": {
                    "required": false,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "apis": {
                                        "description": "Lista de APIs a incluir no token. Se não informado, inclui todas as APIs permitidas.",
                                        "type": "array",
                                        "items": {
                                            "type": "string",
                                            "enum": [
                                                "pae",
                                                "rat",
                                                "tdap",
                                                "bi"
                                            ]
                                        }
                                    },
                                    "refresh": {
                                        "description": "Força a renovação de todos os tokens",
                                        "type": "boolean",
                                        "example": false
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Token gerado com sucesso",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "properties": {
                                                "token": {
                                                    "description": "Token único para Power BI",
                                                    "type": "string",
                                                    "example": "a1b2c3d4e5f6..."
                                                },
                                                "expires_in": {
                                                    "description": "Tempo de expiração em segundos",
                                                    "type": "integer",
                                                    "example": 3600
                                                },
                                                "apis": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string"
                                                    },
                                                    "example": [
                                                        "pae",
                                                        "rat",
                                                        "tdap",
                                                        "bi"
                                                    ]
                                                },
                                                "endpoints": {
                                                    "properties": {
                                                        "pae": {
                                                            "properties": {
                                                                "url": {
                                                                    "type": "string",
                                                                    "example": "https://api-pae.sdc.mg.gov.br"
                                                                },
                                                                "name": {
                                                                    "type": "string",
                                                                    "example": "API PAE"
                                                                }
                                                            },
                                                            "type": "object"
                                                        },
                                                        "rat": {
                                                            "properties": {
                                                                "url": {
                                                                    "type": "string",
                                                                    "example": "https://api-rat.sdc.mg.gov.br"
                                                                },
                                                                "name": {
                                                                    "type": "string",
                                                                    "example": "API RAT"
                                                                }
                                                            },
                                                            "type": "object"
                                                        }
                                                    },
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Não autenticado"
                    },
                    "500": {
                        "description": "Erro ao gerar token"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/power-bi/token/{token}": {
            "get": {
                "tags": [
                    "Power BI"
                ],
                "summary": "Valida e retorna informações de um token do Power BI",
                "description": "Valida um token do Power BI e retorna os tokens individuais para cada API",
                "operationId": "validatePowerBIToken",
                "parameters": [
                    {
                        "name": "token",
                        "in": "path",
                        "description": "Token do Power BI",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Token válido",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "properties": {
                                                "valid": {
                                                    "type": "boolean",
                                                    "example": true
                                                },
                                                "apis": {
                                                    "description": "Tokens individuais para cada API",
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Token inválido ou expirado"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/power-bi/tokens": {
            "get": {
                "tags": [
                    "Power BI"
                ],
                "summary": "Lista tokens individuais para cada API",
                "description": "Retorna tokens individuais para cada API configurada, útil para testes",
                "operationId": "listApiTokens",
                "parameters": [
                    {
                        "name": "apis",
                        "in": "query",
                        "description": "Lista de APIs separadas por vírgula (pae,rat,tdap,bi)",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "pae,rat,bi"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Tokens obtidos com sucesso",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "properties": {
                                                "pae": {
                                                    "type": "string",
                                                    "example": "token_pae_123..."
                                                },
                                                "rat": {
                                                    "type": "string",
                                                    "example": "token_rat_456..."
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/rat/protocolos": {
            "get": {
                "tags": [
                    "RAT"
                ],
                "summary": "Lista todos os protocolos RAT",
                "description": "Retorna uma lista paginada de todos os protocolos RAT cadastrados",
                "operationId": "listProtocolos",
                "parameters": [
                    {
                        "name": "page",
                        "in": "query",
                        "description": "Número da página",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Lista de protocolos retornada com sucesso",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/ProtocoloRAT"
                                            }
                                        },
                                        "meta": {
                                            "$ref": "#/components/schemas/PaginationMeta"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            },
            "post": {
                "tags": [
                    "RAT"
                ],
                "summary": "Cria um novo protocolo RAT",
                "operationId": "storeProtocolo",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "municipio_id",
                                    "tipo"
                                ],
                                "properties": {
                                    "municipio_id": {
                                        "type": "integer",
                                        "example": 123
                                    },
                                    "tipo": {
                                        "type": "string",
                                        "example": "Vistoria Técnica"
                                    },
                                    "descricao": {
                                        "type": "string",
                                        "example": "Solicitação de vistoria técnica"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Protocolo criado com sucesso",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "$ref": "#/components/schemas/ProtocoloRAT"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Protocolo criado com sucesso"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/rat/protocolos/{id}": {
            "get": {
                "tags": [
                    "RAT"
                ],
                "summary": "Exibe um protocolo RAT específico",
                "operationId": "showProtocolo",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Protocolo encontrado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "$ref": "#/components/schemas/ProtocoloRAT"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/webhooks/receive": {
            "post": {
                "tags": [
                    "Webhooks"
                ],
                "summary": "Receber webhook de sistema externo",
                "description": "Endpoint para receber webhooks de sistemas externos com validação de segurança",
                "operationId": "receiveWebhook",
                "requestBody": {
                    "description": "Payload do webhook",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "type",
                                    "data"
                                ],
                                "properties": {
                                    "type": {
                                        "description": "Tipo do evento",
                                        "type": "string",
                                        "example": "payment.completed"
                                    },
                                    "data": {
                                        "description": "Dados do evento",
                                        "type": "object"
                                    },
                                    "timestamp": {
                                        "type": "string",
                                        "format": "date-time",
                                        "example": "2025-11-27T10:00:00Z"
                                    },
                                    "signature": {
                                        "description": "Assinatura HMAC do webhook",
                                        "type": "string"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Webhook processado com sucesso",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Webhook received and queued for processing"
                                        },
                                        "webhook_id": {
                                            "type": "string",
                                            "example": "wh_1234567890"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Dados inválidos",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Invalid webhook signature"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "429": {
                        "description": "Muitas requisições",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Too many requests"
                                        },
                                        "retry_after": {
                                            "type": "integer",
                                            "example": 60
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/webhooks/send": {
            "post": {
                "tags": [
                    "Webhooks"
                ],
                "summary": "Enviar webhook para sistema externo",
                "description": "Envia webhook de forma assíncrona usando filas Redis. Suporta priorização e retry automático.",
                "operationId": "sendWebhook",
                "requestBody": {
                    "description": "Dados do webhook a ser enviado",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "url",
                                    "payload"
                                ],
                                "properties": {
                                    "url": {
                                        "type": "string",
                                        "format": "url",
                                        "example": "https://example.com/webhook"
                                    },
                                    "payload": {
                                        "description": "Dados a serem enviados",
                                        "type": "object"
                                    },
                                    "priority": {
                                        "description": "Prioridade de processamento",
                                        "type": "string",
                                        "enum": [
                                            "low",
                                            "normal",
                                            "high",
                                            "critical",
                                            "webhook"
                                        ],
                                        "example": "normal"
                                    },
                                    "headers": {
                                        "description": "Headers customizados",
                                        "type": "object",
                                        "example": {
                                            "X-Custom-Header": "value"
                                        }
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "202": {
                        "description": "Webhook enfileirado para envio",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Webhook queued for delivery"
                                        },
                                        "priority": {
                                            "type": "string",
                                            "example": "normal"
                                        },
                                        "estimated_delivery": {
                                            "type": "string",
                                            "example": "within 30 seconds"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Dados de validação inválidos",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string"
                                        },
                                        "errors": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/webhooks/send-sync": {
            "post": {
                "tags": [
                    "Webhooks"
                ],
                "summary": "Enviar webhook síncrono (bloqueante)",
                "description": "Envia webhook de forma síncrona. Use apenas para testes ou casos críticos onde resposta imediata é necessária.",
                "operationId": "sendWebhookSync",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "url",
                                    "payload"
                                ],
                                "properties": {
                                    "url": {
                                        "type": "string",
                                        "format": "url"
                                    },
                                    "payload": {
                                        "type": "object"
                                    },
                                    "timeout": {
                                        "description": "Timeout em segundos",
                                        "type": "integer",
                                        "example": 30
                                    },
                                    "headers": {
                                        "type": "object"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Webhook enviado com sucesso",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean"
                                        },
                                        "status": {
                                            "type": "integer",
                                            "example": 200
                                        },
                                        "body": {
                                            "type": "object"
                                        },
                                        "duration_ms": {
                                            "type": "number",
                                            "example": 145.67
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Erro ao enviar webhook",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "error": {
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        }
    },
    "components": {
        "schemas": {
            "ErrorResponse": {
                "properties": {
                    "success": {
                        "type": "boolean",
                        "example": false
                    },
                    "message": {
                        "type": "string",
                        "example": "An error occurred"
                    },
                    "errors": {
                        "type": "object"
                    }
                },
                "type": "object"
            },
            "SuccessResponse": {
                "properties": {
                    "success": {
                        "type": "boolean",
                        "example": true
                    },
                    "message": {
                        "type": "string",
                        "example": "Operation successful"
                    },
                    "data": {
                        "type": "object"
                    }
                },
                "type": "object"
            },
            "PaginatedResponse": {
                "properties": {
                    "data": {
                        "type": "array",
                        "items": {
                            "type": "object"
                        }
                    },
                    "meta": {
                        "properties": {
                            "current_page": {
                                "type": "integer",
                                "example": 1
                            },
                            "per_page": {
                                "type": "integer",
                                "example": 15
                            },
                            "total": {
                                "type": "integer",
                                "example": 100
                            },
                            "last_page": {
                                "type": "integer",
                                "example": 7
                            }
                        },
                        "type": "object"
                    },
                    "links": {
                        "properties": {
                            "first": {
                                "type": "string"
                            },
                            "last": {
                                "type": "string"
                            },
                            "prev": {
                                "type": "string",
                                "nullable": true
                            },
                            "next": {
                                "type": "string",
                                "nullable": true
                            }
                        },
                        "type": "object"
                    }
                },
                "type": "object"
            },
            "Empreendimento": {
                "title": "Empreendimento PAE",
                "properties": {
                    "id": {
                        "type": "integer",
                        "example": 1
                    },
                    "nome": {
                        "type": "string",
                        "example": "Barragem Sul Superior"
                    },
                    "tipo": {
                        "type": "string",
                        "example": "Barragem de Rejeitos"
                    },
                    "municipio": {
                        "properties": {
                            "id": {
                                "type": "integer",
                                "example": 123
                            },
                            "nome": {
                                "type": "string",
                                "example": "Itabirito"
                            },
                            "uf": {
                                "type": "string",
                                "example": "MG"
                            }
                        },
                        "type": "object"
                    },
                    "coordenadas": {
                        "properties": {
                            "lat": {
                                "type": "number",
                                "format": "float",
                                "example": -20.2547
                            },
                            "lng": {
                                "type": "number",
                                "format": "float",
                                "example": -43.8011
                            }
                        },
                        "type": "object"
                    },
                    "protocolo": {
                        "type": "string",
                        "example": "2024.10.15.0081"
                    },
                    "status": {
                        "type": "string",
                        "enum": [
                            "aprovado",
                            "em_analise",
                            "pendente",
                            "vencido"
                        ],
                        "example": "aprovado"
                    },
                    "nivel_emergencia": {
                        "type": "integer",
                        "enum": [
                            1,
                            2,
                            3
                        ],
                        "example": 1
                    },
                    "data_emissao": {
                        "type": "string",
                        "format": "date",
                        "example": "2024-10-15"
                    },
                    "proximo_vencimento": {
                        "type": "string",
                        "format": "date",
                        "example": "2025-10-15"
                    },
                    "created_at": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "updated_at": {
                        "type": "string",
                        "format": "date-time"
                    }
                },
                "type": "object"
            },
            "PaginationMeta": {
                "properties": {
                    "current_page": {
                        "type": "integer",
                        "example": 1
                    },
                    "from": {
                        "type": "integer",
                        "example": 1
                    },
                    "last_page": {
                        "type": "integer",
                        "example": 5
                    },
                    "per_page": {
                        "type": "integer",
                        "example": 15
                    },
                    "to": {
                        "type": "integer",
                        "example": 15
                    },
                    "total": {
                        "type": "integer",
                        "example": 75
                    }
                },
                "type": "object"
            },
            "PaginationLinks": {
                "properties": {
                    "first": {
                        "type": "string",
                        "example": "/api/v1/pae/empreendimentos?page=1"
                    },
                    "last": {
                        "type": "string",
                        "example": "/api/v1/pae/empreendimentos?page=5"
                    },
                    "prev": {
                        "type": "string",
                        "nullable": true
                    },
                    "next": {
                        "type": "string",
                        "example": "/api/v1/pae/empreendimentos?page=2"
                    }
                },
                "type": "object"
            },
            "ProtocoloRAT": {
                "title": "Protocolo RAT",
                "properties": {
                    "id": {
                        "type": "integer",
                        "example": 1
                    },
                    "numero": {
                        "type": "string",
                        "example": "2025/001"
                    },
                    "municipio_id": {
                        "type": "integer",
                        "example": 123
                    },
                    "tipo": {
                        "type": "string",
                        "example": "Vistoria Técnica"
                    },
                    "status": {
                        "type": "string",
                        "example": "em_analise"
                    },
                    "data": {
                        "type": "string",
                        "format": "date",
                        "example": "2025-01-20"
                    }
                },
                "type": "object"
            }
        },
        "securitySchemes": {
            "bearerAuth": {
                "type": "http",
                "description": "Autenticação via Bearer Token (Sanctum)",
                "name": "bearerAuth",
                "in": "header",
                "bearerFormat": "JWT",
                "scheme": "bearer"
            },
            "sanctum": {
                "type": "http",
                "description": "Enter token in format (Bearer <token>)",
                "name": "Authorization",
                "in": "header",
                "scheme": "Bearer",
                "bearerFormat": "JWT"
            }
        }
    },
    "tags": [
        {
            "name": "Health Check",
            "description": "Endpoints de monitoramento e saúde do sistema"
        },
        {
            "name": "Log Viewer",
            "description": "Visualização de logs e eventos do sistema em tempo real"
        },
        {
            "name": "Webhooks",
            "description": "API Endpoints para gerenciamento de webhooks"
        },
        {
            "name": "Autenticação",
            "description": "Endpoints para autenticação e geração de tokens"
        },
        {
            "name": "BI - Entrada",
            "description": "Endpoints para acesso aos dados de entrada de desastres e eventos"
        },
        {
            "name": "Integração",
            "description": "Endpoints para integração entre módulos (PAE, RAT, TDAP)"
        },
        {
            "name": "Dynamic Integration",
            "description": "Hub de integração plug-and-play com sistemas externos. Suporte bidirecional para enviar e receber dados simultaneamente."
        },
        {
            "name": "PAE",
            "description": "Endpoints do módulo PAE (Plano de Ação de Emergência)"
        },
        {
            "name": "Power BI",
            "description": "Endpoints para integração com Power BI e geração de tokens para múltiplas APIs"
        },
        {
            "name": "RAT",
            "description": "Endpoints do módulo RAT (Registro de Atendimento Técnico)"
        }
    ],
    "security": [
        {
            "sanctum": []
        }
    ]
}